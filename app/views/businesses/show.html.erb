<%= render 'dashboard/nav' %>
<div class="container mx-auto h-screen w-full bg-gray-100">
    <% unless @user_owns_current_business %>
      <% if @user_has_own_business %>
        <%= button_to 'Go to my business', switch_to_own_business_path, class: '' %>
      <% else %>
        <%= link_to 'Create my own business', new_business_path, class: '' %>
      <% end %>
    <% end %>
    <div class="flex justify-center content-center">
      <div
        class="md:grid grid-cols-1 grid-rows-2 shadow-md w-2/4  gap-2 p-4 rounded-xl pt-4">
        <!-- <%# Profile picture and main info section %> -->
        <!-- Profile picture must have w-44 and h-44 and m-auto -->
        <div class="flex justify-center">
          <img
            src="https://res.cloudinary.com/dboafhu31/image/upload/v1625318266/imagen_2021-07-03_091743_vtbkf8.png"
            class="w-44 h-44 m-auto border-blue-50"
            alt=""
          />
        </div>
        <div class="md:col-span-3 h-48 shadow-md rounded-lg p-4 space-y-2 bg-gray-100">
          <div class="flex">
            <span
              class="text-sm bg-slate-100 font-bold uppercase border-2 rounded-l px-4 py-2 hover:bg-gray-50 whitespace-no-wrap w-2/6"
              >Negocio:</span
            >
            <input
              class="px-4 border-l-2 cursor-default border-blue-50 focus:outline-none rounded-md rounded-l-none shadow-sm -ml-1 w-4/6"
              type="text"
              value=<%= @business.name %>
              readonly
            />
          </div>
          <div class="flex">
            <span
              class="text-sm border-2 bg-blue-50 font-bold uppercase rounded-l px-4 py-2 hover:bg-gray-50 whitespace-no-wrap w-2/6"
              >Email:</span
            >
            <input
              class="px-4 border-l-2 cursor-default border-blue-50 focus:outline-none rounded-md rounded-l-none shadow-sm -ml-1 w-4/6"
              type="text"
              value=<%= current_user.email %>
              readonly
            />
          </div>
          <div class="flex">
            <span
              class="text-sm border-2 bg-blue-50 font-bold uppercase rounded-l px-4 py-2 hover:bg-gray-50 whitespace-no-wrap w-2/6"
              >Role:</span
            >
            <input
              class="px-4 border-l-2 cursor-default border-blue-50 focus:outline-none rounded-md rounded-l-none shadow-sm -ml-1 w-4/6"
              type="text"
              value=<% @enrollments_data.each do |enrollment| %>
                     <%= enrollment.role%>
                    <% end%>
            />
          </div>
        </div>
        <div
          class="md:col-span-3 bg-gray-100 w-full h-35 rounded-lg shadow-md p-4 m-auto space-y-2 md:block"
        >
          <h3 class="font-bold uppercase">Descripcion</h3>
          <h1> <%= @business.description %> </h1>
        </div>
     <div
          class="md:col-span-3 bg-slate-100 w-auto h-35 rounded-lg shadow-md p-4 m-auto space-y-2 md:block"
        >
    <% if can? :edit, @business %>
      <%= link_to 'Editar negocio',edit_business_path,class: "hover:underline text-gray-800 font-extrabold rounded my-4 md:my-6 py-4 px-8 w-4" %>
    <% end %>
    </div>
      </div>
    </div>
    <% unless @enrollments.empty? %>
      <hr>
      <h1>Switch to another business</h1>
      <%= form_with url: join_to_enrolled_business_path, method: :post do |form| %>
        <div class="my-5">
          <%= form.label 'You are enrolled to the following business' %>
          <%= select_tag(:business_id, options_for_select(enrollments_to_options(@enrollments))) %>
        </div>
        <%= form.submit "Join to business", class: "rounded-lg py-3 px-5 bg-blue-600 text-white inline-block font-medium  cursor-pointer" %>
      <% end %>
    <% end %>
    <ul> 
</div>
